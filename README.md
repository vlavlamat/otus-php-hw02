# ๐ง ะะพะผะฐัะฝะตะต ะทะฐะดะฐะฝะธะต โ2 โ Bash-ัะบัะธะฟัั

## โจ ะฆะตะปั

* ะัะฒะพะธัั ะฝะฐะฟะธัะฐะฝะธะต Bash-ัะบัะธะฟัะพะฒ ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ัะธะฟะพะฒัั ะทะฐะดะฐั.
* ะะฐััะธัััั ัะฐะฑะพัะฐัั ั ะฐัะณัะผะตะฝัะฐะผะธ, ััะปะพะฒะธัะผะธ, ัะตะณัะปััะฝัะผะธ ะฒััะฐะถะตะฝะธัะผะธ.
* ะัะธะผะตะฝะธัั ััะธะปะธัั Linux (`awk`, `sort`, `uniq`, `head`) ะดะปั ะพะฑัะฐะฑะพัะบะธ ัะฐะฑะปะธัะฝัั ะดะฐะฝะฝัั.
* ะะพะฒััะธัั ัะฒะตัะตะฝะฝะพััั ะฒ ัะฐะฑะพัะต ั shell-ะพะบััะถะตะฝะธะตะผ, Docker ะธ Makefile.

---

## ๐ชฉ ะะฐะดะฐะฝะธั

### 1. ๐ ะะฐะปัะบัะปััะพั ััะผะผั

ะกะพะทะดะฐะนัะต Bash-ัะบัะธะฟั `sum.sh`, ะบะพัะพััะน ะฟัะธะฝะธะผะฐะตั **ะดะฒะฐ ะฐัะณัะผะตะฝัะฐ** (ะฒะตัะตััะฒะตะฝะฝัะต ะธะปะธ ัะตะปัะต ัะธัะปะฐ, ะฒ ัะพะผ ัะธัะปะต ะพััะธัะฐัะตะปัะฝัะต) ะธ ะฒัะฒะพะดะธั ะธั **ััะผะผั**.

> ๐ก ะกะบัะธะฟั ะดะพะปะถะตะฝ ะฟัะพะฒะตัััั, ััะพ ะพะฑะฐ ะฐัะณัะผะตะฝัะฐ ัะฒะปััััั ัะธัะปะฐะผะธ. ะัะธ ะฝะตะฒะตัะฝัั ะฒัะพะดะฝัั ะดะฐะฝะฝัั โ ะฒัะฒะตััะธ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต.

ะั ะผะพะถะตัะต ะฒะพัะฟะพะปัะทะพะฒะฐัััั ะดะฒัะผั ัะฟะพัะพะฑะฐะผะธ ะทะฐะฟััะบะฐ:

#### โ ะะฐัะธะฐะฝั 1 โ ะงะตัะตะท `Makefile` ั ะฟะฐัะฐะผะตััะฐะผะธ:

```bash
make up                   # ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ
make sum a=5 b=23         # ะัะฟะพะปะฝะธัั ัะบัะธะฟั ั ะฐัะณัะผะตะฝัะฐะผะธ
```

#### โ ะะฐัะธะฐะฝั 2 โ ะงะตัะตะท ะธะฝัะตัะฐะบัะธะฒะฝัะน bash ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ:

```bash
make run                  # ะะพะนัะธ ะฒ ัะตะถะธะผ bash
sum 1.5 -7                # ะะฐะฟััะบ ัะบัะธะฟัะฐ ัััะฝะพะน ะบะพะผะฐะฝะดะพะน
```

---

### ๐ ะขะพะฟ-3 ะฟะพะฟัะปััะฝัั ะณะพัะพะดะฐ ััะตะดะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

ะคะฐะนะป ั ะดะฐะฝะฝัะผะธ ะฝะฐัะพะดะธััั ะฟะพ ะฟััะธ: `data/users.txt`, ะธ ัะพะดะตัะถะธั ัะฐะฑะปะธัั ัะปะตะดัััะตะณะพ ะฒะธะดะฐ:

```
id user city phone
1 test Moscow 1234123
2 test2 Saint-P 1232121
3 test3 Tver 4352124
4 test4 Milan 7990923
5 test5 Moscow 908213
```

ะกะบัะธะฟั ะฐะฝะฐะปะธะทะธััะตั ััะพั ัะฐะนะป ะธ ะฒัะฒะพะดะธั **3 ัะฐะผัั ัะฐััะพ ะฒัััะตัะฐััะธััั ะณะพัะพะดะฐ**.

---

#### ๐ง ะะฐัะธะฐะฝั 1: ะทะฐะฟััะบ ัะตัะตะท ะพัะดะตะปัะฝัะต ะบะพะผะฐะฝะดั

```bash
make up           # ะะฐะฟััะบะฐะตั ะบะพะฝัะตะนะฝะตั ะฒ ัะพะฝะต
make top-cities   # ะะพะบะฐะทัะฒะฐะตั 3 ัะฐะผัั ะฟะพะฟัะปััะฝัั ะณะพัะพะดะฐ
```

#### โก ะะฐัะธะฐะฝั 2: ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ ะธ ััะฐะทั ะฟะตัะตัะพะด ะฒ ะธะฝัะตัะฐะบัะธะฒะฝัะน ัะตะถะธะผ

```bash
make run          # ะะฐะฟััะบะฐะตั ะบะพะฝัะตะนะฝะตั ะธ ะพัะบััะฒะฐะตั Bash
top-cities        # ะะฒะตััะธ ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ: ะทะฐะฟััะบะฐะตั ะฐะฝะฐะปะธะท ัะฐะนะปะฐ
```
> ๐ ะกะบัะธะฟั `top_cities.sh` ัะถะต ะดะพะฑะฐะฒะปะตะฝ ะฒ ะบะพะฝัะตะนะฝะตั ะธ ะดะพัััะฟะตะฝ ะบะฐะบ ะบะพะผะฐะฝะดะฐ `top-cities`, ะฑะปะฐะณะพะดะฐัั ัะธะผะฒะพะปัะฝะพะน ัััะปะบะต `/usr/local/bin/top-cities`.

---

## ๐ ะะฐะฟััะบ ั Docker ะธ Makefile

ะัะต ะบะพะผะฐะฝะดั ะพะฑะตัะฝััั ะฒ `Makefile` ะดะปั ัะดะพะฑััะฒะฐ ะธ ะฐะฒัะพะผะฐัะธะทะฐัะธะธ.

### ๐ง ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั:

```bash
make up             # ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ
make down           # ะััะฐะฝะพะฒะบะฐ ะธ ัะดะฐะปะตะฝะธะต ะบะพะฝัะตะนะฝะตัะฐ
make rebuild        # ะะตัะตัะพะฑัะฐัั ะบะพะฝัะตะนะฝะตั ั ะฝัะปั
make run            # ะะฐะฟััะบ ะธ ะฒัะพะด ะฒ ะธะฝัะตัะฐะบัะธะฒะฝัั ัะตััะธั bash
make shell          # ะัะพััะพ ะฒะพะนัะธ ะฒ ะบะพะฝัะตะนะฝะตั
make install        # ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ (bc ะธ ะดั.)
make sum a=5 b=6    # ะัะทะพะฒ ัะบัะธะฟัะฐ ััะผะผั
make top-cities     # ะัะทะพะฒ ัะบัะธะฟัะฐ ััะฐัะธััะธะบะธ ะฟะพ ะณะพัะพะดะฐะผ
```

---

### ๐ค ะะพัะตะผั Docker + Makefile?

> ะขะฐะบะพะน ะฟะพะดัะพะด ะฟะพะทะฒะพะปัะตั:
>
> * ะทะฐะบัััั ะฒัั ะปะพะณะธะบั ะฒ ะพะดะฝะพะผ Make-ัะฐะนะปะต;
> * ัะฟัะพััะธัั ะฒัะทะพะฒ ัะบัะธะฟัะพะฒ ะธ ัะฟัะฐะฒะปะตะฝะธะต ะพะบััะถะตะฝะธะตะผ;
> * ัะพะฑะปัะดะฐัั DevOps-ะฟัะฐะบัะธะบะธ ะธ ะพะฑะตัะฟะตัะธัั ะฒะพัะฟัะพะธะทะฒะพะดะธะผะพััั.

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
hw02-bash/
โโโ docker/
โ   โโโ bash.Dockerfile
โโโ scripts/
โ   โโโ sum.sh             # ัะบัะธะฟั-ะบะฐะปัะบัะปััะพั
โ   โโโ top_cities.sh      # ะฐะฝะฐะปะธะท ะณะพัะพะดะพะฒ
โโโ data/
โ   โโโ users.txt          # ัะฐะฑะปะธัะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โโโ docker-compose.yml     # ะบะพะฝัะธะณ Docker
โโโ Makefile               # ัะบัะธะฟัั ะดะปั ัะฟัะฐะฒะปะตะฝะธั
โโโ README.md              # ะดะพะบัะผะตะฝัะฐัะธั
```

---

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

* [ะัะธะผะตัั bash-ัะบัะธะฟัะพะฒ](https://github.com/ruanyf/simple-bash-scripts)
* [ะะฑัะฐะฑะพัะบะฐ ัะตะบััะฐ ะฒ Bash (Habr)](https://habr.com/ru/articles/336596/)
* [awk, uniq, sort ะฒ ะทะฐะดะฐัะฐั](https://habr.com/ru/companies/ruvds/articles/325522/)
* [ะะฐะฑะพัะฐ ั rsync](https://selectel.ru/blog/rsync-guide/)
